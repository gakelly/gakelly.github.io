<html>
    <head>
        <!--JQuery-->
        <script src="./lib/js/jquery-3.1.0.js"></script>
        <!--bootstrap-->
        <link href="./lib/css/bootstrap.css" rel="stylesheet">
        <script src="./lib/js/bootstrap.js"></script>
        <!--phaser-->
        <script src="./lib/js/phaser.js"></script>
        <!--bootstrap toggles -->
        <link href="./lib/css/bootstrap-toggle.min.css" rel="stylesheet">
        <script src="./lib/js/bootstrap-toggle.min.js"></script>
        <link href="./src/styles.css" rel="stylesheet">
        <link id="themeCss" href="./src/styles_light.css" rel="stylesheet">
        <script src="./index.js"></script>
    </head>

    <body>
        <header>
          <!-- <div class="pictures"> -->
            <img id="headerLight" src="./asset/Logo_c.jpg" height="200px" >
            <img id="headerDark" src="./asset/Logo_d.jpg"  height="200px" >
          <!-- </div> -->
            <!-- <div class="swichlocation"> -->
            <input id="themeSwitch" type="checkbox" checked data-toggle="toggle" data-on="Light" data-off="Dark" data-onstyle="success" data-size="mini" align='right' data-offstyle="danger" >
           <!-- </div> -->
        </header>
        <div class="questionborder">
            <div class="questionPane" style="padding:2%; padding-right: 20%; padding-left:20%">
                <div class = "lives">
                    <h3> Lives: <img id="heart" class="heart"src="./asset/heart.png"><img id="heart" class="heart" src="./asset/heart.png" ><img id="heart" class="heart" src="./asset/heart.png" ></h3>
                </div>

                <form action="" class="jumbotron">
                    <h2 id="currentQuizQuestion">Q1 template</h2>
                    <div class="answers">
                        <input id="quizeChoice1" type="radio" name="answer" value="A1"><span id="quizeChoiceTxt1">A1</span></br>
                        <input id="quizeChoice2" type="radio" name="answer" value="A2"><span id="quizeChoiceTxt2">A2</span></br>
                        <input id="quizeChoice3" type="radio" name="answer" value="A3"><span id="quizeChoiceTxt3">A3</span></br>
                        <input id="quizeChoice4" type="radio" name="answer" value="A4"><span id="quizeChoiceTxt4">A4</span></br>
                    </div>
                    <button id="submitBtn" type="button" class="btn btn-success">Submit</button>
                </form>
            </div>
        </div>

        <input type="range" min="0" max="100" defaultValue="0" id='testSlider' />
        <div id='phaserCanvas'></div>

        <footer>
            <p>GovHack 2016</p>
            <p>Project 205 Copyright 2016</p>
        </footer>

        <script type="text/javascript">
            window.onload = loadGame;

            checkHeaderTheme();
            $('#themeSwitch').change(function(){
                checkHeaderTheme();
            });

            function checkHeaderTheme() {
                if($('#themeSwitch').is(':checked')) {
                    $("#headerLight").show();
                    $("#headerDark").hide();
                    $("#submitBtn").addClass("btn-success");
                    $("#submitBtn").removeClass("btn-info");
                    $("#themeCss").attr("href", "./src/styles_light.css")
                } else {
                    $("#headerDark").show();
                    $("#headerLight").hide();
                    $("#submitBtn").addClass("btn-info");
                    $("#submitBtn").removeClass("btn-success");
                    $("#themeCss").attr("href", "./src/styles_dark.css")
                }
            }

            // load data XML
            var xmlDoc;
            var quizs;
            var quizIndex = 1;
            var quizCount = 0;
            $.ajax({
                type: "GET",
                url: "./rsrc/qna_data.xml",
                dataType: "xml",
                success: function (xmlDoc) {
                    // test
                    quizs = $(xmlDoc).find("Table");
                    console.log("quiz set count: ", quizs.length);
                    quizCount = $(quizs).find("Row").length;
                    console.dir(quizs);
                    console.log("quiz count: " + quizCount);

                    buildQuizPanel();
                },
                error: function() { // report error
                    var failureString = "Failure loading data XML";
                    console.log(failureString);
                    alert(failureString);
                }
            });

            var health = 3;


            function buildQuizPanel() {
                console.log("Building quiz panel");

                var indexAgeGroup = 0;
                var indexQuestion = 1;
                var indexCorrectAnswer = 6;
                var quiz = quizs.find("Row").eq(quizIndex);

                var column   = $(quiz).children();
                var question = column.eq(indexQuestion).find("Data").first().text();
                console.log("Current question: " + question);
                $("#currentQuizQuestion").text(question);

                var answer1 = column.eq(indexQuestion+1).find("Data").first().text();
                var answer2 = column.eq(indexQuestion+2).find("Data").first().text();
                var answer3 = column.eq(indexQuestion+3).find("Data").first().text();
                var answer4 = column.eq(indexQuestion+4).find("Data").first().text();
                var correctAnswer = column.eq(indexCorrectAnswer).find("Data").first().text();

                $("#currentQuizQuestion").text(question);
                if (answer1.length > 0) {
                    $("#quizeChoice1").val(answer1);
                    $("#quizeChoiceTxt1").text(answer1);
                }
                if (answer2.length > 0) {
                    $("#quizeChoice2").val(answer2);
                    $("#quizeChoiceTxt2").text(answer2);
                }
                if (answer3.length > 0) {
                    $("#quizeChoice3").val(answer3);
                    $("#quizeChoiceTxt3").text(answer3);
                }
                if (answer4.length > 0) {
                    $("#quizeChoice4").val(answer4);
                    $("#quizeChoiceTxt4").text(answer4);
                }
            }

            $("#submitBtn").click(function(){
                
                // TODO: if answer incorrect reduce health and highlight green correct answer

                // TODO: destroy panel

                // TODO: if more questions build new QnA panel


            });
    	</script>
    </body>
</html>
